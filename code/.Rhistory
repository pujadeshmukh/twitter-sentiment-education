rm(list=ls(all=TRUE))
gc(reset=TRUE)
set.seed(12345)
##
## Required packages
##
require(ggplot2)
require(rworldmap)
source("sentiment.R")
##
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
s <- stream[1:10,]
s
sapply(s$text, tryTolower)
tryTolower <- function(x)
{
# create missing value
y = NA
# tryCatch error
try_error = tryCatch(tolower(x), error=function(e) e)
# if not an error
if (!inherits(try_error, "error"))
y = tolower(x)
# result
return(y)
}
sapply(s$text, tryTolower)
s <- stream[1:100,]
sapply(s$text, tryTolower)
s <- stream[1:1000,]
sapply(s$text, tryTolower)
tryTolower <- function(x)
{
# create missing value
y = NA
# tryCatch error
try_error = tryCatch(tolower(x), error=function(e) e)
# if not an error
if (!inherits(try_error, "error"))
y = tolower(x)
# result
return(y)
}
gc(reset=TRUE)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
dt <- data.table(stream)
require(data.table)
dt <- data.table(stream)
gc(reset=TRUE)
dt
?data.table
dt$text
dt[text,]
dt["text",]
setkey(dt,text)
dt["text",]
dt
rm(dt)
stream$text[1:10]
tolower(stream$text[1:10])
tolower(stream$text[1:1000])
sapply(stream$text[1:1000], tryTolower)
stream$text[988]
gsub(-[a-zA-Z[:spaces:]], "", "Hello, world!")
gsub(^[a-zA-Z[:spaces:]], "", "Hello, world!")
?gsub
gsub("^[a-zA-Z[:spaces:]]", "", "Hello, world!")
gsub("[a-zA-Z[:spaces:]]", "", "Hello, world!")
gsub("[a-zA-Z]", "", "Hello, world!")
gsub("^[a-zA-Z]", "", "Hello, world!")
gsub("-[a-zA-Z]", "", "Hello, world!")
gsub("\[a-zA-Z]", "", "Hello, world!")
gsub("/[a-zA-Z]", "", "Hello, world!")
gsub("^a-zA-Z", "", "Hello, world!")
gsub("^[a-zA-Z]", "", "Hello, world!")
gsub("[^a-zA-Z]", "", "Hello, world!")
gsub("[^a-zA-Z ]", "", "Hello, world!")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
clear.text("#University is about to follow @me at http://tut.by")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
clear.text("#University is about to follow @me at http://tut.by")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
clear.text("#University is about to follow @me at http://tut.by")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
clear.text("#University is about to follow @me at http://tut.by")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
clear.text("#University is about to follow @me at http://tut.by")
clear.text("#University is about to follow @me at http://tut.by")
clear.text()
s <- "#University is about to follow @me at http://tut.by
Ha-ha!"
s
clear.text(s)
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
gsub("^\\s+|\\s+$", "", "  Hello  !")
gsub("^\\s+|\\s+$", "", "  Hello  ")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
stream$text <- sapply(stream$text, clear.text)
gc(reset=TRUE)
stream$text[1:5000] <- sapply(stream$text[1:5000], clear.text)
stream$text[1:5000]
stream$text[5001:10000] <- sapply(stream$text[5001:10000], clear.text)
stream$text[10001:15000] <- sapply(stream$text[10001:15000], clear.text)
stream$text[15001:20000] <- sapply(stream$text[15001:20000], clear.text)
stream$text[20001:30357] <- sapply(stream$text[20001:30357], clear.text)
stream <- na.omit(stream)
range <- 1:5000
stream$text[range] <- sapply(stream$text[range], tryTolower)
stream$text[range]
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:5000
View(stream)
stream$text[range] <- sapply(stream$text[range], clear.text)
View(stream)
stream$text[range] <- sapply(stream$text[range], tryToLower)
stream$text[range] <- sapply(stream$text[range], tryTolower)
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:5000
stream$text[range] <- sapply(stream$text[range], clear.text)
View(stream)
stream$text[range]
sapply(stream$text[1:10], tryTolower)
sapply(stream$text[range], tryTolower)
View(stream)
stream$text[range] <- sapply(stream$text[range], tryTolower)
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
stream$text[range] <- sapply(stream$text[range], clear.text)
View(stream)
stream[range,"text"]
stream[range,"text"] <- sapply(stream$text[range], clear.text)
stream[range,"text"]
stream[range,"text"] <- sapply(stream$text[range], tryTolower)
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
stream[range,"text"] <- sapply(stream$text[range], clear.text)
sapply(stream$text[range], tryTolower)
sapply(stream$text[range], tryTolower)
stream[range,"text"]
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
sapply(sapply(stream$text[range], clear.text), tryTolower)
stream[range,"text"] <- sapply(sapply(stream$text[range], clear.text), tryTolower)
stream[range,"text"]
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
tryTolower <- function(x)
{
# create missing value
y = NA
# tryCatch error
try_error = tryCatch(tolower(x), error=function(e) e)
# if not an error
if (!inherits(try_error, "error"))
y = tolower(x)
# result
as.character(y)
}
sapply(stream$text[range], tryTolower)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
stream[range,"text"] <- sapply(stream$text[range], clear.text)
stream[range,"text"] <- sapply(stream$text[range], tryTolower)
stream[range,"text"]
stream[range]$text
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
stream$text[range]
sapply(stream$text[range], clear.text)
sapply(stream$text[range], tryTolower)
range <- 1:50
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
s <- sapply(stream$text[range], clear.text)
class(s)
s <- sapply(stream$text[range], tryTolower)
s
sapply(stream$text[range], tryTolower)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
s <- sapply(stream$text[range], tryTolower)
s
s <- sapply(stream$text[range], clear.text)
s <- sapply(s, tryTolower)
s
stream$text[range] <- s
s
as.character(s)
s <- as.character(sapply(s, tryTolower))
s
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
range <- 1:50
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- as.character(sapply(stream$text[range], tryTolower))
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
stream$text[range] <- as.character(sapply(stream$text[range], clear.text))
stream$text[range] <- as.character(sapply(stream$text[range], tryTolower))
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
stream$text[range] <- character(sapply(stream$text[range], clear.text))
stream$text[range] <- as.character(sapply(stream$text[range], clear.text))
stream$text[range]
as.character(stream$text)
stream$text <- as.character(stream$text)
range <- 1:50
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
View(stream)
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
stream$text <- as.character(stream$text)
range <- 1:5000
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
range <- 5001:10000
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
range <- 10001:15000
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
range <- 15001:20000
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
range <- 20001:25000
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
range <- 25001:30357
stream$text[range] <- sapply(stream$text[range], clear.text)
stream$text[range] <- sapply(stream$text[range], tryTolower)
stream <- na.omit(stream)
write.table(stream, file="../data/tweets1.txt", row.names=F, col.names=F, sep="\t")
rm(list=ls(all=TRUE))
gc(reset=TRUE)
set.seed(12345)
##
## Required packages
##
require(ggplot2)
require(rworldmap)
source("sentiment.R")
##
## Reading stream
##
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
stream <- na.omit(stream)
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/utils.R')
len <- nrow(stream)
len %/% 10000
len %/% 5000
(len %/% 5000) + 1
N <- (nrow(stream) %/% 5000) + 1
rm(len)
K <- 5000
N <- (nrow(stream) %/% K) + 1
for(i in 1:N){
start  <- (i-1)*K + 1
finish <- i*K
if(i==N) finish <- nrow(stream)
cat(start, finish)
}
for(i in 1:N){
start  <- (i-1)*K + 1
finish <- i*K
if(i==N) finish <- nrow(stream)
cat(start, finish, "\n")
}
K <- 5000
N <- (nrow(stream) %/% K) + 1
for(i in 1:N){
start  <- (i-1)*K + 1
finish <- i*K
if(i==N) finish <- nrow(stream)
stream$score[start:finish] <- score.sentiment(stream$text[start:finish], .progress='text')[,2]
}
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
pos.words <- readLines("../data/positive_words.txt")
neg.words <- readLines("../data/negative_words.txt")
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
score.sentiment(stream$text[start:finish])[,2]
stream <- read.table(file="../data/tweets.txt", header=F, sep="\t",
encoding="UTF-8",
fill=T, allowEscapes=T,
col.names=c("id","date","text","lang","lat","lng","country","code"))
stream <- na.omit(stream)
stream$score <- NA
K <- 5000
N <- (nrow(stream) %/% K) + 1
for(i in 1:N){
start  <- (i-1)*K + 1
finish <- i*K
if(i==N) finish <- nrow(stream)
stream$score[start:finish] <- score.sentiment(stream$text[start:finish])[,2]
}
View(stream)
source('~/docs/Dropbox/Docs/study/Publications/2013/2013-03-IOT/code/sentiment.R')
